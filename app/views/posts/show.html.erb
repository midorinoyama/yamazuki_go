<div class="container">
  <div class="row">
    <div class="col-md-6">
      <%= attachment_image_tag @post, :image, :fill, 400, 500 %>
    </div>
    <div class="col-md-6">
      <div class="flexbox">
        <div class="">
          <%= link_to user_path(@post.user) do %>
            <%= attachment_image_tag @post.user, :profile_image, :fill, 60, 60, fallback: "no_image.jpg", class:"mt-3 rounded-circle" %>
          <% end %></div>
        <div class="">
          <h1><%= @post.user.nickname %>さんの投稿</h1>
          <p><%= @post.mountain %>(<%= @post.prefecture %>) |
          撮影日:<%= @post.filmed_on.strftime('%Y/%m/%d') %></p>
          <p class="text"><%= @post.content %></p>
        </div>
      </div>
      <div class="">
        <% if @post.user == current_user %>
          <%= link_to "編集する", edit_post_path(@post.id) %>
        <% end %>
      </div>

    </div>
  </div>


  <table>
  <p>コメント一覧(<%= @post.post_comments.count %>)件</p>
  <% @post.post_comments.each do |post_comment| %>
  <tr>
    <td>
      <%= link_to user_path(post_comment.user.id) do %>
        <%= attachment_image_tag post_comment.user, :profile_image, :fill, 60, 60, fallback: "no_image.jpg", class:"mt-3 rounded-circle" %>
        <%= post_comment.user.nickname %>
      <% end %>
      <%= post_comment.created_at.strftime('%Y/%m/%d') %>
    </td>
    <td><%= post_comment.comment %></td>
    <% if post_comment.user == current_user %>
    <td><%= link_to "削除する", post_post_comment_path(post_comment.post_id, post_comment.id), method: :delete %></td>
    <% end %>
  </tr>
  <% end %>
  </table>

<%= form_with(model:[@post, @post_comment], local: true) do |f| %>
  <%= f.text_area :comment, size:"90x3", placeholder: "コメントしてみよう"%>
  <%= f.submit "コメントする" %>
<% end %>
</div>
